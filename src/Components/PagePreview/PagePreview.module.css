@import "tailwindcss";

.backdrop {
    @apply absolute top-0 left-0 w-full h-full inset-0 bg-white/30 backdrop-blur-[1px] z-[10];
}

.preview.active + .backdrop {
    opacity: 1;
    pointer-events: auto;
}

.preview {
    @apply relative z-[0] w-[80%] aspect-[16/9] rounded-lg;
    box-shadow: 0 0 4px 1px var(--color-4);
    border-radius: 1rem;
    will-change: transform, width, height;
}

/* big centred state */
.preview.active {
    @apply fixed z-[100] pointer-events-auto top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[80vw] h-[80vh] max-w-[1200px] max-h-[800px];
    box-shadow: 4px 4px 20px var(--color-3);
}


.bigPreviewContent {
    @apply w-full h-full rounded-lg overflow-hidden;
    overscroll-behavior: contain;
    background: var(--curtain-gradient), color-mix(in oklab, var(--bg-color-2) 60%, transparent);
}

.smallPreviewContent {
    @apply pointer-events-none w-full h-full rounded-lg overflow-hidden;
    border: 1px solid var(--accent);
    background: var(--curtain-gradient), color-mix(in oklab, var(--bg-color-2) 60%, transparent);
}

.enlargeButton {

}

.button {
    background: var(--curtain-gradient);
    color: var(--color-1);
    border: 1px solid var(--color-4);
    padding: 0.5rem;
    @apply transition-transform duration-300;
    @apply border-[50%] border-solid rounded-full;
}

.button:hover {
    transform: scale(1.1);
    cursor: pointer;
}

.iframe {
    @apply w-full h-full relative z-[20];
}

.markdown {
    background-color: var(--bg-color-1);
    padding: 4rem 2rem 1rem;
    overflow-y: scroll;
    width: 100%;
    height: 100%;
}

.markdown * {
    line-height: 1.6;
    color: var(--color-2);
}

.markdown h1,
.markdown h2,
.markdown h3,
.markdown h4,
.markdown h5,
.markdown h6 {
    font-weight: 600;
    line-height: 1.25;
    margin-top: 1.6em;
    margin-bottom: 0.6em;
}

.markdown h1 { font-size: 2em; }
.markdown h2 { font-size: 1.6em; }
.markdown h3 { font-size: 1.35em; }
.markdown h4 { font-size: 1.15em; }
.markdown h5 { font-size: 1em; }
.markdown h6 { font-size: 0.9em; color: var(--color-3); }

.markdown p {
    margin: 1em 0;
}

.markdown a {
    color: #0366d6;
    text-decoration: none;
}
.markdown a:hover {
    text-decoration: underline;
}

.markdown ul,
.markdown ol {
    padding-left: 1.5em;
    margin: 1em 0;
}

.markdown li {
    margin: 0.3em 0;
}

.markdown blockquote {
    border-left: 4px solid #ccc;
    padding-left: 1em;
    color: var(--color-2);
    margin: 1.2em 0;
    font-style: italic;
}

.markdown code {
    background: var(--bg-color-3);
    padding: 0.2em 0.4em;
    border-radius: 4px;
    font-size: 0.9em;
}

.markdown pre {
    background: var(--bg-color-2);
    padding: 1em;
    overflow-x: auto;
    border-radius: 6px;
    margin: 1.2em 0;
}

.markdown pre code {
    padding: 0;
    background: none;
    font-size: 0.95em;
}

.markdown hr {
    border: none;
    border-top: 1px solid #ddd;
    margin: 2em 0;
}

.markdown img {
    max-width: 100%;
    display: block;
}

.iframeOpen {
    zoom: 0.6;
}

.loading {
    width: 48px;
    height: 48px;
    border: 5px solid var(--bg-color-2);
    border-bottom-color: transparent;
    border-radius: 50%;
    animation: rotation 1s linear infinite;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 19;
}

@keyframes rotation {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

.buttonTray {
    position: absolute;
    right: -4rem;
    top: 1rem;
    @apply flex flex-col gap-2;
}

.previewInfo {
    @apply absolute font-bold text-center p-4 rounded-tl-lg z-[21];
    background: var(--curtain-gradient);
    opacity: 0.8;

    > h4 {
        text-transform: capitalize;
    }
}

.previewAdditionalInfo {
    @apply absolute font-bold text-center p-4 rounded-tr-lg right-0 z-[21];
    background: color-mix(in oklab, var(--bg-color-1) 90%, transparent);
    opacity: 0.8;
}

@media  (max-width: 768px) or (max-height: 500px) {
    .buttonTray {
        @apply fixed right-1/2 top-[100%] translate-x-1/2 flex flex-row h-fit w-fit mt-2 gap-10;
    }
    .button {
        @apply w-10 h-10;
    }

    .previewInfo,
    .previewAdditionalInfo {
        @apply text-sm;
    }

    .previewAdditionalInfo {
        @apply bottom-0 rounded-tr-none rounded-br-lg;
    }
}
